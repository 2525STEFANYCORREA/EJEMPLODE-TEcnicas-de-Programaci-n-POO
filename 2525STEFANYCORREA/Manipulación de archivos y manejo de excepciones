import java.io.*;

// Excepción personalizada para archivo vacío
class ArchivoVacioException extends Exception {
    public ArchivoVacioException(String mensaje) {
        super(mensaje);
    }
}

// Clase para manejo de archivos (guardar y leer)
class GestorDeArchivo {

    /**
     * Guarda el contenido recibido en el archivo especificado
     * @param nombreArchivo Nombre del archivo donde se escribe
     * @param contenido Contenido que se escribirá en el archivo
     * @throws IOException Si ocurre un error de escritura
     */
    public void guardar(String nombreArchivo, String contenido) throws IOException {
        try (BufferedWriter writer = new BufferedWriter(new FileWriter(nombreArchivo))) {
            writer.write(contenido);
        }
    }

    /**
     * Lee el contenido del archivo línea por línea y lo devuelve como String
     * @param nombreArchivo Nombre del archivo que se va a leer
     * @return Contenido del archivo
     * @throws IOException Si ocurre un error de lectura
     */
    public String leer(String nombreArchivo) throws IOException {
        StringBuilder contenido = new StringBuilder();
        try (BufferedReader reader = new BufferedReader(new FileReader(nombreArchivo))) {
            String linea;
            while ((linea = reader.readLine()) != null) {
                contenido.append(linea).append(System.lineSeparator());
            }
        }
        return contenido.toString();
    }
}

// Clase para validar archivos
class ValidadorArchivo {

    /**
     * Verifica que el archivo no esté vacío. Si lo está, lanza ArchivoVacioException.
     * @param nombreArchivo Nombre del archivo a validar
     * @throws ArchivoVacioException Si el archivo está vacío
     * @throws IOException Si ocurre un error de lectura
     */
    public void verificarNoVacio(String nombreArchivo) throws ArchivoVacioException, IOException {
        try (BufferedReader reader = new BufferedReader(new FileReader(nombreArchivo))) {
            if (reader.readLine() == null) {
                throw new ArchivoVacioException("El archivo '" + nombreArchivo + "' está vacío.");
            }
        }
    }
}

// Clase principal para probar funcionalidades
public class Main {
    public static void main(String[] args) {
        String nombreArchivo = "ejemplo.txt";
        String contenido = "Este es un contenido de ejemplo.\nSegunda línea del archivo.";

        GestorDeArchivo gestor = new GestorDeArchivo();
        ValidadorArchivo validador = new ValidadorArchivo();

        try {
            // Guardar contenido en el archivo
            gestor.guardar(nombreArchivo, contenido);
            System.out.println("Contenido guardado exitosamente.");

            // Leer contenido del archivo
            String contenidoLeido = gestor.leer(nombreArchivo);
            System.out.println("Contenido leído:\n" + contenidoLeido);

            // Verificar que el archivo no esté vacío
            validador.verificarNoVacio(nombreArchivo);
            System.out.println("El archivo no está vacío.");

        } catch (ArchivoVacioException ave) {
            System.err.println("Error: " + ave.getMessage());
        } catch (IOException ioe) {
            System.err.println("Error de entrada/salida: " + ioe.getMessage());
        }
    }
}
